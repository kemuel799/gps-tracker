<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Real-Time GPS Tracker</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<style>
  body, html { height: 100%; margin: 0; font-family: Arial; }
  #map { height: 90%; width: 100%; }
  #controls { height: 10%; display: flex; justify-content: center; align-items: center; background: #f2f2f2; }
  button { padding: 10px 20px; font-size: 18px; background: #4CAF50; color: white; border: none; border-radius: 8px; cursor: pointer; margin-right: 10px; }
  button:hover { background: #45a049; }
  #latlng { font-size: 16px; }
</style>
</head>
<body>

<div id="map"></div>
<div id="controls">
  <button onclick="updateLocation()">Update Location</button>
  <span id="latlng">Lat: -- , Lng: --</span>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
let map = L.map('map').setView([0,0], 2);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);

let marker = L.marker([0,0], {draggable: true}).addTo(map);
marker.on('dragend', function(e) {
    const pos = marker.getLatLng();
    document.getElementById('latlng').innerText = `Lat: ${pos.lat.toFixed(6)} , Lng: ${pos.lng.toFixed(6)}`;
});

function updateLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
            (pos) => {
                const lat = pos.coords.latitude;
                const lng = pos.coords.longitude;
                map.setView([lat,lng], 18);
                marker.setLatLng([lat,lng]);
                document.getElementById('latlng').innerText = `Lat: ${lat.toFixed(6)} , Lng: ${lng.toFixed(6)}`;
            },
            (err) => {
                alert("Unable to get GPS location. Make sure your device has GPS and allows location access.");
            },
            { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }
        );
    } else {
        alert("Geolocation is not supported by your browser.");
    }
}

// Auto-update every 5 seconds
setInterval(updateLocation, 5000);

// Initial load
updateLocation();
</script>

</body>
</html>
